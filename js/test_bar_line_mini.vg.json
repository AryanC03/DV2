{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
        "text": "Disasters and GSP Growth Over Time",
        "color": "white"
    },
    "background": "transparent",
    "params": [
        {
            "name": "YearStart",
            "value": 1990
        },
        {
            "name": "YearEnd",
            "value": 2024
        }
    ],
    "data": {
        "url": "data/state_gsp_disasters.json",
        "format": {
            "type": "json",
            "parse": {
                "State": "string",
                "Year": "number",
                "GSPGrowthPercent": "number",
                "NumberOfDisasters": "number"
            }
        }
    },
    "transform": [
        {
            "filter": "datum.Year >= YearStart && datum.Year <= YearEnd"
        },
        {
            "filter": {
                "field": "State",
                "oneOf": [
                    "Australian Capital Territory",
                    "New South Wales",
                    "Northern Territory",
                    "Queensland",
                    "South Australia",
                    "Tasmania",
                    "Victoria",
                    "Western Australia"
                ]
            }
        }
    ],
    "columns": 4,
    "facet": {
        "field": "State",
        "type": "nominal",
        "header": {
            "labelColor": "white",
            "titleColor": "white"
        }
    },
    "spec": {
        "height": 200,
        "width": 225,
        "layer": [
            {
                "mark": {
                    "type": "rule",
                    "color": "white",
                    "size": 1
                },
                "encoding": {
                    "y": {
                        "datum": 0
                    }
                }
            },
            {
                "mark": {
                    "type": "line",
                    "color": "#000000",
                    "point": true
                },
                "encoding": {
                    "x": {
                        "field": "Year",
                        "type": "ordinal",
                        "axis": {
                            "title": "Year",
                            "labelColor": "white",
                            "titleColor": "white",
                            "tickMinStep": 5,
                            "values": [
                                1990,
                                1995,
                                2000,
                                2005,
                                2010,
                                2015,
                                2020,
                                2025
                            ]
                        }
                    },
                    "y": {
                        "field": "GSPGrowthPercent",
                        "type": "quantitative",
                        "scale": {
                            "domain": [
                                -5,
                                15
                            ],
                            "nice": false
                        },
                        "axis": {
                            "title": "GSP Growth (%)",
                            "orient": "right",
                            "labelColor": "white",
                            "titleColor": "white"
                        }
                    },
                    "tooltip": [
                        {
                            "field": "State",
                            "type": "nominal",
                            "title": "State"
                        },
                        {
                            "field": "Year",
                            "type": "ordinal",
                            "title": "Year"
                        },
                        {
                            "field": "GSPGrowthPercent",
                            "type": "quantitative",
                            "title": "GSP Growth (%)"
                        }
                    ]
                }
            },
            {
                "mark": {
                    "type": "bar",
                    "color": "#1f77b4",
                    "opacity": 0.6
                },
                "encoding": {
                    "x": {
                        "field": "Year",
                        "type": "ordinal",
                        "axis": {
                            "title": "Year",
                            "labelColor": "white",
                            "titleColor": "white",
                            "tickMinStep": 5,
                            "values": [
                                1990,
                                1995,
                                2000,
                                2005,
                                2010,
                                2015,
                                2020,
                                2025
                            ]
                        }
                    },
                    "y": {
                        "field": "NumberOfDisasters",
                        "type": "quantitative",
                        "scale": {
                            "domain": [
                                -5,
                                15
                            ],
                            "nice": false
                        },
                        "axis": {
                            "title": "Number of Disasters",
                            "labelColor": "white",
                            "titleColor": "white",
                            "orient": "left"
                        }
                    },
                    "tooltip": [
                        {
                            "field": "State",
                            "type": "nominal",
                            "title": "State"
                        },
                        {
                            "field": "Year",
                            "type": "quantitative",
                            "title": "Year"
                        },
                        {
                            "field": "NumberOfDisasters",
                            "type": "quantitative",
                            "title": "Number of Disasters"
                        }
                    ]
                }
            }
        ]
    },
    "resolve": {
        "scale": {
            "y": "independent"
        }
    }
}
